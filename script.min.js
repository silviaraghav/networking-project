const SUPABASE_URL="https://nvmtcxcztcqyctbayrqy.supabase.co",SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52bXRjeGN6dGNxeWN0YmF5cnF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA2ODEzNDEsImV4cCI6MjA1NjI1NzM0MX0.7SVGb2S1aAsH-3ttjun8-Eg2PViWJhlKP5spMYUddjw";async function resolveDNS(){let e=document.getElementById("domain").value.trim();if(!e)return void alert("Please enter a domain name");const t=e.replace(/[^a-zA-Z0-9.-]/g,"");if(!t)return void alert("Invalid domain name.");document.getElementById("ipAddress").textContent="Resolving domain...";try{const e=await fetch(`https://networkcalc.com/api/dns/lookup/${t}`);if(!e.ok)throw new Error("Failed to fetch data");const o=await e.json();if(o.records&&o.records.A&&o.records.A.length>0){const e=o.records.A[0].address;document.getElementById("ipAddress").textContent=`IP Address: ${e}`,await fetch(`${SUPABASE_URL}/rest/v1/dns_queries`,{method:"POST",headers:{"Content-Type":"application/json",apikey:SUPABASE_KEY,Authorization:`Bearer ${SUPABASE_KEY}`},body:JSON.stringify({domain:t,ip_address:e}),mode:"cors"}),console.log("✅ DNS Query Saved to Supabase!")}else document.getElementById("ipAddress").textContent="No IP address found for the domain."}catch(e){console.error("❌ Error:",e),document.getElementById("ipAddress").textContent=`Error: ${e.message}`}DOMPurify.sanitize(e)}function captchaSuccess(){console.log("✅ reCAPTCHA verified successfully!")}function setSessionCookie(){document.cookie.split("; ").find((e=>e.startsWith("userSession=")))||(document.cookie="userSession=true; Secure; SameSite=Strict; max-age=3600",console.log("Session started!"))}function checkSession(){document.cookie.split("; ").find((e=>e.startsWith("userSession=")))?console.log("Session is active"):console.log("No active session")}function generateCSRFToken(){let e=localStorage.getItem("csrfToken");return e||(e=Math.random().toString(36).substring(2),localStorage.setItem("csrfToken",e)),e}console.log(localStorage.getItem("csrfToken")),document.addEventListener("DOMContentLoaded",(function(){setSessionCookie(),checkSession(),generateCSRFToken();document.querySelectorAll("img").forEach((e=>e.setAttribute("loading","lazy")))}));